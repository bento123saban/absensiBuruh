<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absensi Buruh Tata Lingkungan</title>

    <link rel="icon" type="image/png" href="img/fav-icon.png">

    <link rel="stylesheet" href="bendhard16.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./font/fontawsome/css/all.css">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="manifest.json"> 
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <div class=" vw-100 vh-100 clr-somegrey content dis-none" id="main">

        <div id="form" class="p-20">
            <div class="flex-start gap-10 mb-2">
                <h2 class="align-center green p-20 borad-5 m-0 w-100 gap-5">Absensi Buruh</h2>
                <h2 class="align-center green p-20 borad-5 m-0 pointer" id="update-data"><i class="fas fa-sync"></i></h2>
            </div>

            <!-- Koordinat -->
            <div class="form-group white p-10 borad-5 relative hidden">
                <div class="loader-content absolute-top w-100 h-100 grid-center dis-none" id="loader-koordinat">
                    <div class="loader" id="the-loader"></div>
                </div>
                <div class="flex-beetwen align-items-center ask-label">
                    <label class=" dis-block bolder w-100">Koordinat :</label>
                    <div class="green p-5 borad-3 grid-center pointer" id="getCoord" title="Deteksi Lokasi">
                        <i class="fas fa-location fz-16 pointer"></i>
                    </div>
                </div>
                <div class="flex-beetwen w-100 gap-10">
                    <input type="text" id="koordinat" readonly class="w-100 p-5 borad-3" placeholder="Tekan tombol di samping kanan atas untuk mendeteksi lokasi">
                </div>
                <p class="m-0 p-0 fz-10 mt-1" id="koordinat-text"></p>
            </div>

            
            <!-- Tipe -->
            <div class="form-group white p-10 borad-5">
                <div class="flex-beetwen ask-label align-items-center">
                    <label class=" dis-block  bolder">Tipe</label>
                </div>
                <div class="radio-list flex-start gap-10 flex-wrap  clr-somegrey pt-1">
                    <label class="radio-inline pointer">
                        <input type="radio" name="tipe" value="Taman"> Taman
                    </label>
                    <label class="radio-inline pointer">
                        <input type="radio" name="tipe" value="Berem"> Berem
                    </label>
                </div>
            </div>

            <!-- Pengawas -->
            <div class="form-group white p-10 borad-5">
                <label class=" dis-block ask-label bolder w-100">Pengawas</label>
                <div class="flex-beetwen w-100 gap-10">
                    <select name="" class="w-100 white br-none p-5" disabled id="pengawas">
                    </select>
                </div>
            </div>
            
            <!-- Buruh -->
            <div class="form-group white p-10 borad-5">
                <label class=" dis-block ask-label bolder w-100">Buruh</label>
                <div class="flex-beetwen w-100 gap-10">
                    <select name="" class="w-100 white br-none p-5" id="buruh" disabled>
                    </select>
                </div>
            </div>
            
            <!-- Lokasi Jalan -->
            <div class="form-group white p-10 borad-5">
                <div class="flex-beetwen ask-label align-items-center">
                    <label class=" dis-block  bolder">Lokasi :</label>
                </div>
                <div class="radio-list flex-start gap-10 flex-wrap  clr-somegrey" id="lokasi-box">
                </div>
                <div class="flex-beetwen w-100 gap-10 mb-1 mt-1 dis-none" id="lokasi-manual-box">
                    <input type="text" id="lokasi-manual" class="w-100 p-5 borad-3" placeholder="Lainnya (isi jika tidak ada di pilihan atas)">
                </div>
            </div>

            <!-- Photo -->
            <div class="form-group white p-10 borad-5" id="photo-box-content">
                <label class=" dis-block ask-label bolder w-100">Photo</label>
                <div class="flex-beetwen flex-column mt-1 w-100 gap-10 relative" id="photo-area">
                    <div class="photo hidden relative hidden">
                        <img src="" alt="" class="" id="image-photo">
                        <span class="align-center p-5" id="to-capture"><i class="fas fa-camera clr-white"></i></span>
                    </div>
                </div>
            </div>

            <!-- Keterangan -->
            <div class="form-group white p-10 borad-5">
                <label class=" dis-block ask-label bolder w-100">Keterangan (opsional)</label>
                <div class="flex-beetwen mt-1 w-100 gap-10">
                    <textarea id="keterangan" class="w-100 p-5 borad-3" placeholder="Jawaban Anda" rows="4"></textarea>
                </div>
            </div>

            <button class="grey  p-10 w-100 fz-17 borad-5 bolder" id="submit">KIRIM</button>

            
        </div>

        <div id="capture" class="dis-none vw-100 vh-100">
            <video id="video" class="borad-5 absolute-bottom vw-100 vh-100" autoplay></video>
            <div class="w-100 flex-center gap-20 absolute-bottom mb-2 capture-tabs p-5">
                <button class="p-10 fz-17 basic-glass" id="switch-btn"><i class="fas fa-camera-rotate"></i></button>
                <button class="p-10 fz-17 basic-glass" id="capture-btn"><i class="fas fa-image"></i></button>
                <button class="p-10 fz-17 basic-glass" id="close-btn"><i class="fas fa-x"></i></button>
            </div>
            <span id="camera-error" class="dis-none"></span>
        </div>
    </div>

    <div id="home" class="grid-center content vh-100 vw-100" >
        <div class="w-100">
            <img src="img\fav-icon.png" class="dis-block m-auto w-30" alt="">
            <h2 class="align-center uppercase clr-green">Absensi Buruh <br> Tata Lingkungan</h2>
            <div class="hr green"></div>
            <div id="login-google">
                <span class="dis-block m-auto align-center clr-somegrey fz-12 bolder mt-2 mb-1 w-100" id="home-text">
                    Untuk melakukan ABSEN,<br>
                    silahkan login dengan akun google anda
                </span>
                
                <div class="content grid-center" id="login-google">
                    <div>
                        <div class="g_id_signin"
                            data-type="standard"
                            data-shape="pill"
                            data-text="continue_with"
                            data-theme="filled_blue"
                            data-size="large">
                        </div>
                    </div>
                </div>
                <div id="g_id_onload"
                    data-client_id="795274958306-a5gs7djtrc92vhmntvpttekf75umcbm4.apps.googleusercontent.com"
                    data-context="signin"
                    data-ux_mode="popup"
                    data-callback="loginGoogle"
                    data-nonce=""
                    data-auto_prompt="false">
                </div>
            </div>
            <br>
            <br>
            <div class="home-buttons w-100 flex-center gap-20 flex-wrap">
                <button class="transparent uppercase bolder br-none pointer clr-green" id="to-data">Cek Data</button>
            </div>
        </div>
    </div>

    <div id="list-data" class="content vh-100 vw-100 p-20 dis-none">
        <h3 class="m-0 mb-2 align-center p-10 borad-5 green uppercase to-home">Data Absensi - 3 Hari</h3>
        <!-- Pengawas -->
        <div class="form-group white p-10 borad-5 w-100">
            <label class=" dis-block ask-label bolder w-100">Pengawas</label>
            <div class="flex-beetwen w-100 gap-10">
                <select name="" class="w-100 white br-none p-5" id="pengawas-data">
                </select>
            </div>
        </div>
        <div class="hr green"></div>
        <div id="list-buruh">
        </div>
        
    </div>

    <div class="content dis-none" id="loader">
        <div class="loaderx grid-center">
            <div class="loader-content relative clr-black br-black" id="loader-content">
                <div class="loader" id="the-loader"></div>
                <div class="align-center loader-text fz-12 bolder" id="loader-text">request_data</div>
            </div>
        </div>
    </div>

    <div class="content grid-center p-20 vh-100 vw-100 dis-none" id="verify">
        <div id="verify-data" class="align-center">
            <i class="fas fa-check fz-30 grid-center m-auto" ></i>
            <h4 class="p-5 m-0 uppercase align-center w-100">Granted</h4>
            <span class="dis-block align-center mt-1 bolder fz-12" id="verify-text">...</span>
        </div>
        <div id="verify-btn" class="absolute-bottom w-100 flex-center gap-20 p-10 fz-16 clr-somegrey mb-4 uppercase">
            <span class="dis-none pointer" id="verify-reload" onclick="window.location.reload()">reload</span>
            <span class="dis-none pointer" id="verify-retry">COBA_LAGI</span>
            <span class="dis-none pointer" id="verify-absen">Absen</span>
            <span class="dis-none pointer" id="verify-cek_data">Cek Data</span>
            <span class="dis-none pointer opacity-0" id="verify-riwayat">Riwayat</span>
        </div>
    </div>

    <div class="content vh-100 vw-100 dis-none" id="blank"></div>
    
    <div id="toast" class=""></div>


    <script>
        window.addEventListener('online', (event) => {
            console.log("ðŸŽ‰ Koneksi pulih! Browser sekarang ONLINE.");
            this.loaderContent.classList.remove("off")
            STATIC.loaderRun("CONNECTING")
            setTimeout(() => STATIC.loaderStop(), 2500);
        });
        window.addEventListener('offline', (event) => {
            console.log("ðŸš¨ Koneksi terputus! Browser sekarang OFFLINE.");
            STATIC.loaderRun("OFFLINE")
            this.loaderContent.classList.add("off")
        }); 
    </script>

    <script src="app2.js"></script>
    <script>
        window.app = new absensi();
        window.app.start();
        function loginGoogle(response) {
            return window.app.device.onGoogleSuccess(response.credential);
        }
    </script>

</body>
</html>