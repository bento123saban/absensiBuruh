<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABSEN BURUH</title>
    <meta name="google" content="notranslate">
    <link rel="icon" type="image/png" href="img/favicon.ico">
    <link rel="stylesheet" href="bendhard16.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./font/fontawsome/css/all.css">
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="manifest.json"> 
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body translate="no">

    <div class="main-bg relative">
        <img src="img\hp-bg.png" alt="" id="main-bg" class="dis-none">
    </div>

    <div class="content vw-100 relative hidden" id="home">

        <div class="flex-beetwen w-100 align-end gap-10" id="logos">
            <div class="flex-start gap-10">
                <img src="img\logo-ambon.png" class="dis-block" alt="" id="ambon-logo">
                <img src="img\logo-dlhp.png" class="dis-block" alt="" id="front-logo">
            </div>
            <span class="dis-block mt-1 clr-somegrey">DLHP Kota Ambon</span>
        </div>

        <div class="h-100 hidden" id="home-content">
            <div class="glass">
                <img src="./img/glass_leaf-removebg-preview.png" class="dis-none" alt="" id="glass-leaf">
                <h2 class="align-center clr-somegrey m-0 p-0" id="h2-1">ABSENSI BURUH</h2>
                <h2 class="align-center clr-somegrey m-0 p-0 mb-1">TAMAN dan BEREM</h2>
                <span class="clr-somegrey align-center dis-block" id="bidang-text">Bidang Tata Lingkungan</span>
                <div class="hr grey"></div>
                <div id="login-google" class="basic-glass">
                    <span class="dis-block align-center clr-somegrey fz-8 mt-2 mb-2 w-100" id="home-text">
                        Untuk melakukan ABSEN,<br>
                        silahkan login dengan akun google anda
                    </span>
                    <div class="content grid-center" id="login-google">
                        <div>
                            <div class="g_id_signin"
                                data-type="standard"
                                data-shape="pill"
                                data-text="continue_with"
                                data-theme="filled_blue"
                                data-size="large">
                            </div>
                        </div>
                    </div>
                    <div id="g_id_onload"
                        data-client_id="682153086273-cvnoual5uc002rbisi3t1ctbgmd5dot2.apps.googleusercontent.com"
                        data-context="signin"
                        data-ux_mode="popup"
                        data-callback="loginGoogle"
                        data-nonce=""
                        data-auto_prompt="false">
                    </div>
                </div>
                <span class="dis-block align-center fz-10 mt-2 clr-somegrey">atau</span>
                
                <button class="uppercase transparent bolder pointer clr-somegrey align-center br-none mt-1 w-100 " id="to-data">Cek Data</button>
            </div>
            <img src="./img/tree-bg.png" alt="" id="tree-bg" class="">
        </div>
    </div>

    <div class="vh-100 clr-somegrey dis-none" id="main">
        <div id="form" class="p-20">
            <div class="flex-start gap-10 mb-2">
                <h2 class="align-center green p-10 borad-5 m-0 w-100 gap-5">Absensi Buruh</h2>
                <h2 class="align-center green p-10 borad-5 m-0 pointer" id="update-data"><i class="fas fa-sync"></i></h2>
            </div>

            <div class="form-group p-10 borad-5">
                <div class="flex-beetwen ask-label align-items-center">
                    <label class=" dis-block  bolder">Status :</label>
                </div>
                <div class="radio-list flex-start gap-10 flex-wrap  clr-somegrey pt-1" id="status">
                    <label class="radio-inline pointer">
                        <input type="radio" name="status" value="Hadir" checked> Hadir
                    </label>
                    <label class="radio-inline pointer">
                        <input type="radio" name="status" value="Izin"> Izin
                    </label>
                    <label class="radio-inline pointer">
                        <input type="radio" name="status" value="Sakit"> Sakit
                    </label>
                </div>
            </div>

            <div id="hadir-form">

                <!-- Koordinat -->
                <div class="form-group p-10 borad-5 relative hidden" data-hide="hide">
                    <div class="loader-content absolute-top w-100 h-100 grid-center dis-none" id="loader-koordinat">
                        <div class="loader" id="the-loader"></div>
                    </div>
                    <div class="flex-beetwen align-items-center ask-label">
                        <label class=" dis-block bolder w-100">Koordinat :</label>
                        <div class="green p-5 borad-3 grid-center pointer" id="getCoord" title="Deteksi Lokasi">
                            <i class="fas fa-location fz-16 pointer"></i>
                        </div>
                    </div>
                    <div class="flex-beetwen w-100 gap-10">
                        <input type="text" id="koordinat" readonly class="w-100 p-5 borad-3" placeholder="Tekan tombol di samping kanan atas untuk mendeteksi lokasi">
                    </div>
                    <p class="m-0 p-0 fz-10 mt-1" id="koordinat-text"></p>
                </div>

                <!-- Tipe -->
                <div class="form-group p-10 borad-5">
                    <div class="flex-beetwen ask-label align-items-center">
                        <label class=" dis-block  bolder">Tipe</label>
                    </div>
                    <div class="radio-list flex-start gap-10 flex-wrap  clr-somegrey pt-1">
                        <label class="radio-inline pointer">
                            <input type="radio" name="tipe" value="Taman"> Taman
                        </label>
                        <label class="radio-inline pointer">
                            <input type="radio" name="tipe" value="Berem"> Berem
                        </label>
                    </div>
                </div>

                <!-- Pengawas -->
                <div class="form-group p-10 borad-5">
                    <label class=" dis-block ask-label bolder w-100">Pengawas</label>
                    <div class="flex-beetwen w-100 gap-10">
                        <select name="" class="w-100 br-none p-5" disabled id="pengawas">
                        </select>
                    </div>
                </div>
                
                <!-- Buruh -->
                <div class="form-group p-10 borad-5">
                    <label class=" dis-block ask-label bolder w-100">Buruh</label>
                    <div class="flex-beetwen w-100 gap-10">
                        <select name="" class="w-100 br-none p-5" id="buruh" disabled>
                        </select>
                    </div>
                </div>
                
                <!-- Lokasi Jalan -->
                <div class="form-group p-10 borad-5"  data-hide="hide">
                    <div class="flex-beetwen ask-label align-items-center">
                        <label class=" dis-block  bolder">Lokasi :</label>
                    </div>
                    <div class="radio-list flex-start gap-10 flex-wrap  clr-somegrey" id="lokasi-box">
                    </div>
                    <div class="flex-beetwen w-100 gap-10 mb-1 mt-1 dis-none" id="lokasi-manual-box">
                        <input type="text" id="lokasi-manual" class="w-100 p-5 borad-3" placeholder="Lainnya (isi jika tidak ada di pilihan atas)">
                    </div>
                </div>

                
                <!-- Keterangan -->
                <div class="form-group p-10 borad-5">
                    <label class=" dis-block ask-label bolder w-100">Keterangan</label>
                    <div class="flex-beetwen mt-1 w-100 gap-10">
                        <textarea id="keterangan" class="w-100 p-5 borad-3" placeholder="Jawaban Anda" rows="4"></textarea>
                    </div>
                </div>

                <!-- izin/sakit file -->
                <div id="other-form" class="form-group p-10 borad-5 dis-none">
                    <label class=" dis-block ask-label bolder w-100">File (opsional)</label>
                    <div class="flex-beetwen mt-1 w-100 gap-10">
                        <input type="file" class="br-none" id="other-file">
                    </div>
                    <span id="base64Result" class="fz-14"></span>
                </div>

                <!-- Photo -->
                <div class="form-group p-10 borad-5" id="photo-box-content"  data-hide="hide">
                    <label class=" dis-block ask-label bolder w-100">Photo</label>
                    <div class="flex-beetwen flex-column mt-1 w-100 gap-10 relative" id="photo-area">
                        <div class="photo hidden relative hidden">
                            <img src="" alt="" class="" id="image-photo">
                            <span class="align-center p-5 white" id="to-capture"><i class="fas fa-camera clr-somegrey"></i></span>
                        </div>
                    </div>
                </div>

                <button class="grey  p-10 w-100 fz-17 borad-5 bolder" id="submit">KIRIM</button>
            </div>

            
        </div>

        <div id="capture" class="vw-100 vh-100  dis-none">
            <div class="relative vh-100 vw-100 hidden flex-start flex-column p-20 gap-10">
                <div id="video-box" class="relative h-100 w-100 borad-10 hidden">
                    <video id="video" class="" autoplay></video>
                </div>
                <div class="w-100 flex-center gap-20 capture-tabs p-5">
                    <button class="p-10 blue br-white" id="switch-btn"><i class="fas fa-camera-rotate"></i></button>
                    <button class="p-10 green br-white" id="capture-btn"><i class="fas fa-image"></i></button>
                    <button class="p-10 red br-white" id="close-btn"><i class="fas fa-x"></i></button>
                </div>
                <span id="camera-error" class="dis-none"></span>
            </div>
        </div>
    </div>

    <div class="content vh-100 vw-100 p-20 dis-none" id="list-data" >
        <h3 class="m-0 mb-2 align-center p-10 borad-5 green uppercase to-home">Data Absensi - 3 Hari</h3>
        <!-- Pengawas -->
        <div class="form-group p-10 borad-5 w-100">
            <label class=" dis-block ask-label bolder w-100">Pengawas</label>
            <div class="flex-beetwen w-100 gap-10">
                <select name="" class="w-100 br-none p-5" id="pengawas-data">
                </select>
            </div>
        </div>
        <div class="hr green"></div>
        <div id="list-buruh">
        </div>
        
    </div>

    <div class="content dis-none" id="loader">
        <div class="loaderx grid-center">
            <div class="loader-content relative clr-black br-black" id="loader-content">
                <div class="loader" id="the-loader"></div>
                <div class="align-center loader-text fz-12 bolder" id="loader-text">request_data</div>
            </div>
        </div>
    </div>

    <div class="content grid-center p-20 vh-100 vw-100 dis-none relative" id="verify">
        <div id="verify-data" class="align-center">
            <div class="clr-white bolder">
                <i class="fas fa-check green"></i>
                <h4 class="denied">Granted</h4>
            </div>
            <span class="dis-block align-center mt-1 bolder fz-12 align-center clr-somegrey" id="verify-text">...</span>
        </div>
        <div id="verify-btn" class="absolute-bottom w-100 flex-center gap-20 p-10 fz-16 clr-somegrey mb-4 uppercase">
            <span class="dis-none pointer" id="verify-reload" onclick="window.location.reload()"><i class="fas fa-home"></i></span>
            <span class="dis-none pointer" id="verify-retry">COBA_LAGI</span>
            <span class="dis-none pointer" id="verify-absen">Absen</span>
            <span class="dis-none pointer" id="verify-cek_data">Cek Data</span>
            <span class="dis-none pointer opacity-0" id="verify-riwayat">Riwayat</span>
        </div>
    </div>

    <div class="content vh-100 vw-100 dis-none" id="blank"></div>
    
    <div id="toast" class=""></div>


    <script>
        window.addEventListener('online', (event) => {
            console.log("ðŸŽ‰ Koneksi pulih! Browser sekarang ONLINE.");
            this.loaderContent.classList.remove("off")
            STATIC.loaderRun("CONNECTING")
            setTimeout(() => STATIC.loaderStop(), 2500);
        });
        window.addEventListener('offline', (event) => {
            console.log("ðŸš¨ Koneksi terputus! Browser sekarang OFFLINE.");
            STATIC.loaderRun("OFFLINE")
            this.loaderContent.classList.add("off")
        }); 
    </script>

    <script src="app2.js"></script>
    <script>
        window.app = new absensi();
        window.app.start();
        function loginGoogle(response) {
            return window.app.device.onGoogleSuccess(response.credential);
        }
    </script>

</body>
</html>